% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/agentic-chat.R
\name{cassidy_agentic_task}
\alias{cassidy_agentic_task}
\title{Run an Agentic Task with CassidyAI}
\usage{
cassidy_agentic_task(
  task,
  assistant_id = Sys.getenv("CASSIDY_ASSISTANT_ID"),
  api_key = Sys.getenv("CASSIDY_API_KEY"),
  tools = names(.cassidy_tools),
  working_dir = getwd(),
  max_iterations = 10,
  initial_context = NULL,
  safe_mode = TRUE,
  approval_callback = NULL,
  verbose = TRUE
)
}
\arguments{
\item{task}{Character. The task description}

\item{assistant_id}{Character. CassidyAI assistant ID (default: env var)}

\item{api_key}{Character. CassidyAI API key (default: env var)}

\item{tools}{Character vector. Tools to enable (default: all)}

\item{working_dir}{Character. Working directory (default: current)}

\item{max_iterations}{Integer. Max tool calls (default: 10). Use \code{Inf} for unlimited.}

\item{initial_context}{Character/list. Optional context to provide}

\item{safe_mode}{Logical. Require approval for risky tools? (default: TRUE)}

\item{approval_callback}{Function. Custom approval handler (default: NULL)}

\item{verbose}{Logical. Show progress? (default: TRUE)}
}
\value{
A \code{cassidy_agentic_result} object containing:
\describe{
\item{task}{The original task description}
\item{final_response}{Final response or completion message}
\item{iterations}{Number of iterations completed}
\item{actions_taken}{List of all actions performed}
\item{thread_id}{CassidyAI thread ID}
\item{success}{Whether the task completed successfully}
}
}
\description{
Execute a task where the AI assistant autonomously uses tools to accomplish
complex goals. Uses a hybrid architecture: Assistant for reasoning, Workflow
for structured tool decisions, R for execution.
}
\details{
\strong{Safe Mode} is enabled by default, requiring user approval for risky
operations like writing files or executing code. This protects against
unintended changes to your system.
\subsection{How It Works}{

The agentic system uses direct parsing:
\enumerate{
\item \strong{Assistant} analyzes the task and chooses a tool in structured format
\item \strong{R parsing} extracts the tool decision from the response
\item \strong{R functions} execute tools with proper error handling
\item \strong{Results} are sent back to the assistant for next steps
}

The assistant responds with structured \verb{<TOOL_DECISION>} blocks that specify
which tool to use and what parameters to provide.
}

\subsection{Safe Mode}{

When \code{safe_mode = TRUE} (default), risky operations require approval:
\itemize{
\item \code{write_file}: Writing/modifying files
\item \code{execute_code}: Executing R code
}

You'll be prompted to approve, deny, edit parameters, or view details
before each risky action. Safe mode can be disabled by setting
\code{safe_mode = FALSE}, but use caution!
}

\subsection{Custom Approval}{

Provide your own approval logic with a callback function:

\if{html}{\out{<div class="sourceCode r">}}\preformatted{my_approver <- function(action, input, reasoning) \{
  # Auto-approve read operations, deny writes
  list(approved = action == "read_file", input = input)
\}

cassidy_agentic_task("Analyze code", approval_callback = my_approver)
}\if{html}{\out{</div>}}
}
}
\examples{
\dontrun{
# Simple task with safe mode (default)
result <- cassidy_agentic_task(
  "List all R files and describe what they do"
)

# Task with limited tools (read-only)
result <- cassidy_agentic_task(
  "Analyze the package structure",
  tools = c("list_files", "read_file", "get_context"),
  max_iterations = 5
)

# Unlimited iterations for complex tasks
result <- cassidy_agentic_task(
  "Refactor all test files to use modern patterns",
  max_iterations = Inf
)

# Allow risky operations without approval (use with caution!)
result <- cassidy_agentic_task(
  "Create a helper function in R/helpers.R",
  safe_mode = FALSE
)

# Provide initial context
ctx <- cassidy_context_project(level = "standard")
result <- cassidy_agentic_task(
  "Review my code and suggest improvements",
  initial_context = ctx$text
)
}
}
\concept{agentic-functions}
