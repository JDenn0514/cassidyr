% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/context-compact.R
\name{cassidy_compact}
\alias{cassidy_compact}
\title{Compact conversation history using summarization}
\usage{
cassidy_compact(
  session,
  summary_prompt = NULL,
  preserve_recent = 2,
  api_key = NULL
)
}
\arguments{
\item{session}{A cassidy_session object to compact}

\item{summary_prompt}{Character. Custom prompt for summarization. If NULL,
uses default prompt based on Anthropic context engineering guidelines.}

\item{preserve_recent}{Integer. Number of most recent message pairs to
preserve verbatim (not summarized). Default 2.}

\item{api_key}{Character. API key for requests.}
}
\value{
Updated cassidy_session object with new thread and compacted history
}
\description{
When a conversation approaches the token limit, this function summarizes
the thread history into a concise summary and starts a new thread with
that summary as the first message. This allows the conversation to continue
without hitting API limits.
}
\details{
Since CassidyAI does not provide direct summarization, this function sends
a summarization prompt to the assistant, then creates a new thread with
the summary.
}
\examples{
\dontrun{
session <- cassidy_session()
# ... many messages ...

# Manual compaction
session <- cassidy_compact(session)

# Continue chatting
chat(session, "What were the key decisions we made?")
}
}
